class jax{static#t=null;static#e=null;static#s=null;static#a=new Map;static#r=null;static#i=null;static#n=["text","arraybuffer","json","blob","document"];static#o(){let t=!1;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=new ActiveXObject("Msxml2.XMLHTTP")}t||console.error("Невозможно создать XMLHttpRequest"),this.#t=t}static#h(t,e){return e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e}static#c(t,e){return"object"==typeof e&&null!==e&&"Map"===e.dataType?new Map(e.value):e}static#l(t){let e=t.getElementsByTagName("input");for(let t of e)if("file"==t.type)return!0;return!1}static#p(t,e=!1){let s=e?new FormData:[];try{if(t instanceof Map&&(t=Object.fromEntries(t)),!(t instanceof Object))return!1;for(let a in t){let r=t[a];if(r instanceof Object||r instanceof Map){r=r instanceof Object?Object.entries(r):r;for(let[t,i]of r)e?s.append(a+`[${t}]`,i.toString()):s.push(a+`[${t}]=`+encodeURIComponent(i.toString()))}else if(Array.isArray(r))for(let t of r)e?s.append(a+"[]",t.toString()):s.push(a+"[]="+encodeURIComponent(t.toString()));else e?s.append(a,r.toString()):s.push(a+"="+encodeURIComponent(r.toString()))}return e||(s=s.join("&")),s}catch(t){return console.error(t),!1}}static#d(t,e=!1){try{if(t instanceof FormData){let s;if(e){s={};let e=0;for(let[a,r]of t.entries())if(/[\[\]]/gm.test(a)){let t=a.match(/[\[]([\w]+)[\]]/);if(null!=t&&t.length>1){let e=a.replace(/[\[]([\w]+)[\]]/g,"");null==s[e]&&(s[e]={}),s[e][t[1]]=r}else{let t=a.replace(/[\[\]]/g,"");null==s[t]&&(s[t]={}),s[t][e.toString()]=r}e++}else s[a]=r;return s}s=[];for(let[e,a]of t.entries())s.push(encodeURIComponent(e)+"="+encodeURIComponent(a));return s=s.join("&"),s}return!1}catch(t){return console.error(t),!1}}static#m(){try{if("boolean"==typeof this.#e?.credentials&&(this.#t.withCredentials=this.#e.credentials),null!=this.#e?.headers&&null!=this.#e?.headers)for(let[t,e]of this.#e.headers)"content-type"!=t.toLowerCase()&&this.#a.set(t,e);if("GET"==this.#s||"DELETE"==this.#s){if(this.#a.set("Content-type","application/x-www-form-urlencoded"),null!=this.#e?.data&&null!=this.#e?.data)if(this.#e.data instanceof FormData)this.#i+="?"+this.#d(this.#e.data);else if(this.#e.data instanceof Map)this.#i+=NaN+this.#p(this.#e.data).bind(this);else if(this.#e.data instanceof Object)this.#i+=NaN+this.#p(this.#e.data);else if(this.#e.data instanceof HTMLElement||"string"==typeof this.#e.data){let t=this.#e.data instanceof HTMLElement?this.#e.data:document.getElementById(this.#e.data);if(this.#l(t))console.error("File cannot be sent by the GET method");else{let e=new FormData(t);this.#i+=NaN+this.#d(e)}}}else{let t="url";if(this.#a.set("Content-type","application/x-www-form-urlencoded"),"string"==typeof this.#e?.sendType)switch(this.#e.sendType){case"json":t="json",this.#a.set("Content-type","application/json; charset=utf-8");break;case"form":t="form",this.#a.set("Content-type","multipart/form-data");break;default:t="url",this.#a.set("Content-type","application/x-www-form-urlencoded")}if(null!=this.#e?.data&&null!=this.#e?.data)if(this.#e.data instanceof FormData)switch(t){case"json":this.#r=JSON.stringify(this.#d(this.#e.data,!0));break;case"form":this.#r=this.#e.data;break;case"url":this.#r=this.#d(this.#e.data)}else if(this.#e.data instanceof Map)switch(t){case"json":this.#r=JSON.stringify(this.#e.data,this.#h);break;case"form":this.#r=this.#p(this.#e.data,!0);break;case"url":this.#r=this.#p(this.#e.data)}else if(this.#e.data instanceof Object)switch(t){case"json":this.#r=JSON.stringify(this.#e.data,this.#h);break;case"form":this.#r=this.#p(this.#e.data,!0);break;case"url":this.#r=this.#p(this.#e.data)}else if(this.#e.data instanceof HTMLElement||"string"==typeof this.#e.data){let e=this.#e.data instanceof HTMLElement?this.#e.data:document.getElementById(this.#e.data),s=new FormData(e);switch(t){case"json":this.#r=JSON.stringify(this.#d(s,!0));break;case"form":this.#r=s;break;case"url":this.#r=this.#d(s)}}}if("string"==typeof this.#e?.responseType)for(let t of this.#n)if(this.#e.responseType==t){this.#t.responseType=t;break}return""==this.#t.responseType&&(this.#t.responseType="json"),"function"==typeof this.#e?.progress&&(this.#t.upload.onprogress=this.#e.progress),!0}catch(t){return console.error(t),!1}}static async#f(){return new Promise(((t,e)=>{this.#t.addEventListener("load",function(e){this.#e=null,this.#s=null,this.#a.clear(),this.#r=null,this.#i=null,t(e.target.response)}.bind(this)),this.#t.addEventListener("error",function(t){e("Error: send failed")}.bind(this)),this.#t.open(this.#s,this.#i,!0);for(let[t,e]of this.#a)this.#t.setRequestHeader(t,e);try{"POST"==this.#s||"PUT"==this.#s?this.#t.send(this.#r):this.#t.send(null)}catch(t){e(t)}}))}static async post(t,e){if(this.#e=e,this.#i=t,this.#s="POST",this.#o(),this.#m())return this.#f()}static async get(t,e){if(this.#e=e,this.#i=t,this.#s="GET",this.#o(),this.#m())return this.#f()}static async put(t,e){if(this.#e=e,this.#i=t,this.#s="PUT",this.#o(),this.#m())return this.#f()}static async delete(t,e){if(this.#e=e,this.#i=t,this.#s="DELETE",this.#o(),this.#m())return this.#f()}}